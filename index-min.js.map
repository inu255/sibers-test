{"version":3,"sources":["contacts/contacts.js","header/header.js","popup-edit/popup-edit.js","popup-show/popup-show.js"],"names":["createContactItem","id","currentUser","JSON","parse","localStorage","getItem","listItem","document","createElement","itemName","itemEmail","itemPhone","itemCompany","classList","add","innerHTML","name","email","phone","company","appendChild","setAttribute","querySelector","insertAdjacentElement","editContacts","nameInput","emailInput","phoneInput","companyInput","addEventListener","event","preventDefault","value","editUser","remove","createPopup","style","userId","newName","newEmail","newPhone","newCompany","user","setItem","stringify","closePopups","shownItems","querySelectorAll","i","length","fetch","then","response","json","j"],"mappings":"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","sourcesContent":["// import {createPopup} from './popup-show.js';\r\n\r\n\r\n\r\nfetch('http://demo.sibers.com/users')\r\n  .then(response => response.json())\r\n  .then(json => {\r\n    // console.log(json);\r\n    // localStorage.clear();\r\n    document.querySelector('#contactsNumber').innerHTML = json.length;\r\n    for (let i = 0; i < json.length; i++) {\r\n      // задаём приоритет у локально изменённых данных контакта\r\n      if (!localStorage.getItem('User' + i)) {\r\n        localStorage.setItem('User' + i, JSON.stringify(json[i]));\r\n      }\r\n    }\r\n\r\n    for (let j = 0; j < localStorage.length; j++) {\r\n      createContactItem(j)\r\n    }\r\n  }).then(() => {\r\n    createPopup();\r\n  })\r\n\r\n    // export\r\n    function createContactItem(id) {\r\n    let currentUser = JSON.parse(localStorage.getItem('User' + id));\r\n    let listItem = document.createElement('div'),\r\n        itemName = document.createElement('div'),\r\n        itemEmail = document.createElement('div'),\r\n        itemPhone = document.createElement('div'),\r\n        itemCompany = document.createElement('div');\r\n    listItem.classList.add('contacts__item');\r\n    itemName.classList.add('contacts__name', 'contacts__list-item');\r\n    itemEmail.classList.add('contacts__email', 'contacts__list-item');\r\n    itemPhone.classList.add('contacts__phone', 'contacts__list-item');\r\n    itemCompany.classList.add('contacts__company', 'contacts__list-item');\r\n\r\n    itemName.innerHTML = currentUser.name;\r\n    itemEmail.innerHTML = currentUser.email;\r\n    itemPhone.innerHTML = currentUser.phone;\r\n    itemCompany.innerHTML = currentUser.company.name;\r\n    itemCompany.innerHTML = currentUser.company.name;\r\n\r\n\r\n    listItem.appendChild(itemName);\r\n    listItem.appendChild(itemEmail);\r\n    listItem.appendChild(itemPhone);\r\n    listItem.appendChild(itemCompany);\r\n    listItem.setAttribute('data-userid', id);\r\n\r\n    // dynamicList.appendChild(listItem);\r\n    if (id === 0) {\r\n      document.querySelector('#dynamicList').insertAdjacentElement('afterbegin', listItem);\r\n    } else {\r\n      document.querySelector('#dynamicList [data-userid=\"'+ (id - 1) + '\"]')\r\n      // document.querySelector('#dynamicList').children[id]\r\n        .insertAdjacentElement('afterend', listItem);\r\n        // такая конструкция нужна для того, чтобы применять эту функцию\r\n        // и при создании списка контактов при загрузке страницы,\r\n        // и для вывода результатов поиска, и для мгновенного отображения\r\n        // элементов изменённого через попап контакта\r\n    }\r\n\r\n  }\r\n","// тут будет поиск\r\n","// import {createContactItem} from './contacts.js';\r\n// import {createPopup} from './popup-show.js';\r\n\r\nfunction editContacts(id) {\r\n  let nameInput = document.querySelector('.popup-edit__name'),\r\n      emailInput = document.querySelector('.popup-edit__email'),\r\n      phoneInput = document.querySelector('.popup-edit__phone'),\r\n      companyInput = document.querySelector('.popup-edit__email');\r\n  document.querySelector('.popup-edit__save').addEventListener('click', (event) => {\r\n    event.preventDefault();\r\n    nameInput.value && editUser(id, nameInput.value);\r\n    emailInput.value && editUser(id, false, emailInput.value);\r\n    phoneInput.value && editUser(id, false, false, phoneInput.value);\r\n    companyInput.value && editUser(id, false, false, false, companyInput.value);\r\n\r\n    document.querySelector('#dynamicList [data-userid=\"'+ id + '\"]').remove();\r\n    createContactItem(id);\r\n    createPopup();\r\n\r\n    document.querySelector('.popup-overlay').style = 'display: none';\r\n    document.querySelector('.popup-edit').style = 'display: none';\r\n    document.querySelector('.popup-show').style = 'display: none';\r\n    // сделать скрытие попапов через функцию\r\n  })\r\n}\r\n\r\nfunction editUser(userId, newName, newEmail, newPhone, newCompany) {\r\n  let user = JSON.parse(localStorage.getItem('User' + userId));\r\n\r\n  if (newName) {\r\n    user.name = newName;\r\n  }\r\n\r\n  if (newEmail) {\r\n    user.name = newEmail;\r\n  }\r\n\r\n  if (newPhone) {\r\n    user.name = newPhone;\r\n  }\r\n\r\n  if (newCompany) {\r\n    user.name = newCompany;\r\n  }\r\n\r\n  localStorage.setItem('User' + userId, JSON.stringify(user));\r\n}\r\n\r\nfunction closePopups() {\r\n\r\n}\r\n\r\ndocument.querySelector('.popup-edit__hide').addEventListener('click', (event) => {\r\n  document.querySelector('.popup-overlay').style = 'display: none';\r\n  document.querySelector('.popup-edit').style = 'display: none';\r\n  document.querySelector('.popup-show').style = 'display: none';\r\n})\r\n\r\ndocument.querySelector('.popup-edit__cancel').addEventListener('click', (event) => {\r\n  event.preventDefault();\r\n  document.querySelector('.popup-edit').style = 'display: none';\r\n  document.querySelector('.popup-show').style = 'display: block';\r\n})\r\n","// import {editContacts} from './popup-edit.js';\r\n\r\nfunction createPopup() {\r\n  let shownItems = document.querySelectorAll('#dynamicList > *');\r\n\r\n  for (let i = 0; i < shownItems.length; i++) {\r\n    shownItems[i].addEventListener('click', function(event) {\r\n      document.querySelector('.popup-overlay').style = 'display: block';\r\n      document.querySelector('.popup-show').style = 'display: block';\r\n      document.querySelector('.popup-show__name')\r\n        .innerHTML = JSON.parse(localStorage.getItem('User' + i)).name;\r\n\r\n      document.querySelector('#email').innerHTML = JSON.parse(localStorage.getItem('User' + i)).email;\r\n      document.querySelector('#email')\r\n        .setAttribute('href', 'mailto:' + JSON.parse(localStorage.getItem('User' + i)).email);\r\n\r\n      document.querySelector('#phone').innerHTML = JSON.parse(localStorage.getItem('User' + i)).phone;\r\n      document.querySelector('#phone')\r\n        .setAttribute('href', 'tel:' + JSON.parse(localStorage.getItem('User' + i)).phone);\r\n\r\n      document.querySelector('#company')\r\n        .innerHTML = JSON.parse(localStorage.getItem('User' + i)).company.name;\r\n\r\n      document.querySelector('.popup-show__edit').addEventListener('click', (event) => {\r\n        document.querySelector('.popup-show').style = 'display: none';\r\n        document.querySelector('.popup-edit').style = 'display: block';\r\n        editContacts(i);\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\ndocument.querySelector('.popup-show__hide').addEventListener('click', (event) => {\r\n  document.querySelector('.popup-overlay').style = 'display: none';\r\n  document.querySelector('.popup-show').style = 'display: none';\r\n  document.querySelector('.popup-edit').style = 'display: none';\r\n})\r\n\r\ndocument.querySelector('.popup-overlay').addEventListener('click', (event) => {\r\n  document.querySelector('.popup-overlay').style = 'display: none';\r\n  document.querySelector('.popup-edit').style = 'display: none';\r\n  document.querySelector('.popup-show').style = 'display: none';\r\n})\r\n"],"file":"index-min.js"}